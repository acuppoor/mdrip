@{
    ViewBag.Title = "Scatter Plot";
}



<div class="row alert alert-info" style="margin-top:65px;">
    <div class="col-md-11 bold">
        <span class="badge badge-danger selectedfromresult">Infection 1</span>
        <span class="badge badge-danger selectedfromresult">Infection 2</span>
        <span class="badge badge-neutral selectedfromresult">Infection 3</span>
        <span class="badge badge-danger selectedfromresult">Infection 4</span>
        <span class="badge badge-danger selectedfromresult">Infection 5</span>
        <span class="">&nbsp;&nbsp;&nbsp;&nbsp;</span>
        <span class="badge badge-neutral selectedfromresult">Region 1</span>
        <span class="badge badge-neutral selectedfromresult">Region 2</span>
        <span class="badge badge-neutral selectedfromresult">Region 3</span>
        <span class="badge badge-neutral selectedfromresult">Region 4</span>
        <span class="badge badge-neutral selectedfromresult">Region 5</span>
    </div>
    <div class="col-md-1" style="height:20px">
        <ul class="nav nav-pills nav-pills-primary nav-pills-just-icons" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" href="#link" role="tablist">
                    <i class="fa fa-refresh"></i>
                </a>
            </li>
        </ul>
    </div>
</div>
<div class="test-border sidenav">
    <p>Filters</p>
    <select class="form-control" id="chartSelection">
        <option>Select a Visualisation</option>
        <option>Bar Chart</option>
        <option>Line Graph</option>
        <option>Pie Chart</option>
        <option>Scatter Plot</option>
    </select>
    <div class="">
        <span class="progress-badge">Infection:</span>
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Infection">
            <span class="input-group-btn">
                <button class="btn btn-primary btn-icon " type="button">Go!</button>
            </span>
        </div><!-- /input-group -->
        <span class="progress-badge">Result:</span>
        <div style="overflow: scroll; height: 100px; width: 300px">
            <table>
                <thead>
                <tr>
                    <th><div label="Column 1"></div></th>
                    <th><div label="Column 1"></div></th>
                </tr>
                </thead>
                <tbody>
                <tr><td><input type="checkbox"></input></td><td>Infection 1</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Infection 2</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Infection 4</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Infection 5</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Infection 7</td></tr>
                </tbody>
            </table>
        </div>
        
        <span class="progress-badge">Country:</span>
        <select class="form-control">
            <option>Pakistan</option>
        </select>
        
        <span class="progress-badge">Regions:</span>
        <div class="input-group">
            <input type="text" class="form-control" placeholder="Infection">
            <span class="input-group-btn">
                <button class="btn btn-primary btn-icon " type="button">Go!</button>
            </span>
        </div><!-- /input-group -->
        <span class="progress-badge">Result:</span>
        <div style="overflow: scroll; height: 100px; width: 300px">
            <table>
                <thead>
                <tr>
                    <th><div label="Column 1"></div></th>
                    <th><div label="Column 1"></div></th>
                </tr>
                </thead>
                <tbody>
                <tr><td><input type="checkbox"></input></td><td>Region 1</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Region 2</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Region 3</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Region 4</td></tr>
                <tr><td><input type="checkbox"></input></td><td>Region 5</td></tr>
                </tbody>
            </table>
        </div>
        
        <span class="progress-badge">From:</span>
        <input type="text" class="form-control date-picker" value="01/01/@DateTime.Now.Year" data-datepicker-color="primary">
        
        <span class="progress-badge">To:</span>
        <input type="text" class="form-control date-picker" value="@DateTime.Now.Day/@DateTime.Now.Month/@DateTime.Now.Year" data-datepicker-color="primary">

    </div>
</div>

<div class="row remainingheight" >
    <div class="col-md-12" id="visualisation">
    </div>
</div>


<style>
    .wrapper{
        margin-left:170px;
        overflow-x: hidden;
    }
</style>

<script
    src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
    crossorigin="anonymous"></script>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script src="~/Scripts/script/morris.min.js"></script>
<script src="~/Scripts/script/raphael.min.js"></script>

<script>

    $(document).ready(function() {
        var selectedItem = '@ViewBag.Id';
        switch (selectedItem) {
        case "piechart":
            selectedItem = "Pie Chart";
            donut();
            break;
        case "barchart":
            selectedItem = "Bar Chart";
            barchart();
            break;
        case "scatter":
            selectedItem = "Scatter Plot";
            scatter();
            break;
        case "linegraph":
            selectedItem = "Line Graph";
            lineGraph();
            break;
        default:
            selectedItem = "Pie Chart";
            break;
        }
        
        testfunction();
        
        // fix below
        
        var select = $('#chartSelection');
        
        for (var i = 0; i < select.options.length; ++i) {
            if (select.options[i].text === selectedItem)
                select.options[i].selected = true;
        }
    });
    
    function testfunction() {
        var items = $('.selectedfromresult');
        
        for (var i = 0; i < items.length; i++) {
            items[i].addEventListener('click', function(event) {
                var element = $(event.target);;
                alert($(this));
                alert(element);
                element.classList.toggle("badge-danger");
                $(this).classList.toggle("badge-neutral");
            });
        }
    }
    
    
    $('#chartSelection').change(function() {
        var element = $('#chartSelection');
        var selected = element.val();
        resetVisualisation();
        switch (selected) {
        case "Pie Chart":
            donut();
            break;
        case "Bar Chart":
            barchart();
            break;
        case "Scatter Plot":
            scatter();
            break;
        case "Line Graph":
            lineGraph();
            break;
        default:
        }
    });
    
    function resetVisualisation() {
        $('#visualisation').innerHTML = "";
        $("#visualisation").html("");
    }

    function lineGraph() {
        Morris.Line({
            element: 'visualisation',
            data: [
                { x: '2018-01', y: 100 },
                { x: '2018-02', y: 0 },
                { x: '2018-03', y: 0 },
                { x: '2018-04', y: 345 },
                { x: '2018-05', y: 0 },
                { x: '2018-06', y: 200 },
                { x: '2018-07', y: 50 },
                { x: '2018-08', y: 0 }
            ],
            xkey: 'x',
            ykeys: ['y'],
            smooth: false,
            hideHover: 'auto',
            axes: true,
            grid: true,
            labels: ['Prevalence']
        });
    }

    function donut() {
        Morris.Donut({
            element: 'visualisation',
            data: [
                { label: "Download Sales", value: 12 },
                { label: "In-Store Sales", value: 30 },
                { label: "Mail-Order Sales", value: 20 }
            ]
        });
    }

    function scatter() {
        var regions = ['Region1', 'Region2', 'Region3', 'Region4', 'Region5', 'Region6'];
        var trace1 = {
            x: regions,
            y: [1, 2, 3, 4, 5],
            mode: 'markers',
            type: 'scatter',
            name: 'Infection A',
            text: ['A-1', 'A-2', 'A-3', 'A-4', 'A-5'],
            marker: { size: 12 }
        };

        var trace2 = {
            x: regions,
            y: [1, 3, 4, 5, 6],
            mode: 'markers',
            type: 'scatter',
            name: 'Infection B',
            text: ['B-a', 'B-b', 'B-c', 'B-d', 'B-e'],
            marker: { size: 12 }
        };

        var data = [trace1, trace2];

        var layout = {
            xaxis: {
                range: [-1, 6]
            },
            yaxis: {
                range: [0, 8]
            },
            title: 'Prevalence at Different Regions'
        };

        Plotly.newPlot('visualisation', data, layout);
    }

    function barchart() {
        Morris.Bar({
            element: 'visualisation',
            data: [
                { y: 'Islamabad', a: 100},
                { y: 'Region 2', a: 75},
                { y: 'Region 3', a: 50},
                { y: 'Region 4', a: 75},
                { y: 'Region 5', a: 50},
                { y: 'Region 6', a: 75},
                { y: 'Region 7', a: 100 }
            ],
            xkey: 'y',
            ykeys: ['a'],
            hideHover: 'auto',
            labels: ['Prevalence']
        });
    }

</script>